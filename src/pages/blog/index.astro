---
import info from "bootstrap-icons/icons/info-circle.svg";
import '../../styles/blog.scss'
import Layout from "../../layouts/Layout.astro";
import BsAlert from '../../components/bsAlert.svelte'
import { getCollection } from 'astro:content'
import GradientHeader from "../../components/gradientHeader.svelte";
const posts = await getCollection("blog")
posts.sort(
  (a, b) =>
    new Date(b.data.pubDate).valueOf() -
    new Date(a.data.pubDate).valueOf()
);
---

<Layout title="Ryan Mullin - Blog">
  <GradientHeader title="Blog" client:load />
  <div class="mx-10">
    <BsAlert
      client:idle
      type="info"
      icon={info}
      iconAlt="Info"
      text="All posts organized by date. Stay and scroll a while!"
      actionLink=""
      actionText=""
    />
  </div>
  <section>
    <ul class="grid lg:grid-cols-3 portrait:grid-cols-1 grid-cols-2 pr-8">
      {
        posts.map((post) => (
          <li class="card p-6 shadow-md">
            <div class="rounded-lg p-4">
              <img src={post.data.heroImage.src} alt="" class="m-auto p-4 card-img-top" />
              <div class="card-body">
                <a
                href={`/blog/data/posts/${post.slug ?? post.data.urlBase}`}
                class="font-bold card-title font-secondary"
              >
                {post.data.title}
              </a>{" "}
              <br />
              <p class="font-bold font-secondary card-subtitle text-neutral-800">{post.data.author}</p>
              <time datetime={post.data.pubDate} class="card-text text-black">
                {new Date(post.data.pubDate).toLocaleDateString(
                  "en-us",
                  {
                    year: "numeric",
                    month: "short",
                    day: "numeric",
                  }
                )}
              </time>
              <p class="p-4 text-black">{post.data.description}</p>
              </div>
            </div>
          </li>
        ))
      }
    </ul>
  </section>
</Layout>

<style>
  img {
    width: 350px;
  }
</style>
